<div class="row">
  <div class="col-12 px-2 p-lg-0">
    <nav class="navbar navbar-expand-lg justify-content-between pb-lg-0 px-0 px-lg-2" aria-label="Main navigation">
      <button class="navbar-toggler ml-1 shadow-none collapsed" type="button" data-toggle="collapse" data-target="#navbarRealEstate" aria-controls="navbarRealEstate" aria-expanded="false" aria-label="Toggle button">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarRealEstate">
        <ul class="navbar-nav">
          {%- assign mones = site.pages | sort: 'path' | reverse -%}

          {%- assign ifOneIsChildren = false -%}
          {%- for 1 in mones -%}
            {%- if 1.url contains page.url and 1.url != page.url -%}
              {%- assign ifOneIsChildren = true -%}
            {%- endif -%}
          {%- endfor -%}

          {%- for mone in mones -%}
            {%- capture mslug -%}{{ mone.url | split: "/" | last }}{%- endcapture -%}
            {%- capture mcurrent -%}{{ mone.url | remove: mslug | remove: "//" | append: "/" }}{%- endcapture -%}
            {%- if "/" == mcurrent and mone.navhide != 1 -%}
              <li class="nav-item position-static{% if ifOneIsChildren == true %} dropdown{% endif %}">
                <a class="nav-link{% if ifOneIsChildren == true %} dropdown-toggle{% endif %}{% if page.url == mone.url %} active{% endif %}" href="{%- if ifOneIsChildren == true -%}{{ mslug | prepend: '#' }}{%- else -%}{{ mone.url }}{%- endif -%}" id="navDrop{{ mslug | capitalize }}" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  {%- if mone.navtitle -%}{{ mone.navtitle }}{%- else -%}{{ mone.title }}{%- endif -%}
                </a>
                {% if ifOneIsChildren == true %}
                  {%- include header/dropdown.html current=mone.url -%}
                {%- endif -%}
              </li>
              {%- if mone.url -%}
                {%- assign mtwos = site.pages -%}
                {%- assign ifTwoIsChildren = false -%}
                {%- for 2 in mtwos -%}
                  {%- if 2.url contains page.url and 2.url != page.url -%}
                    {%- assign ifTwoIsChildren = true -%}
                  {%- endif -%}
                {%- endfor -%}
                {%- for mtwo in mtwos -%}
                  {%- capture mslug -%}{{ mtwo.url | split: "/" | last }}{%- endcapture -%}
                  {%- capture mcurrent -%}{{ mtwo.url | remove: mslug | remove: "//" | append: "/" }}{%- endcapture -%}
                  {%- if mone.url == mcurrent and mtwo.url contains "city" or mtwo.url contains "town" -%}
                  <li class="nav-item position-static{% if ifTwoIsChildren == true %} dropdown{%- endif -%}">
                    <a class="nav-link{% if ifTwoIsChildren == true %} dropdown-toggle{%- endif -%}" href="{%- if ifTwoIsChildren == true -%}{{ mslug | prepend: '#' }}{%- else -%}{{ mtwo.url }}{%- endif -%}" id="navDrop{{ mslug | capitalize }}" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      {%- if mtwo.navtitle -%}{{ mtwo.navtitle }}{%- else -%}{{ mtwo.title }}{%- endif -%}
                    </a>
                    {% if ifTwoIsChildren == true %}
                      {%- include header/dropdown.html current=mtwo.url -%}
                    {%- endif -%}
                  </li>
                  {%- endif -%}
                {%- endfor -%}
              {%- endif -%}
            {%- endif -%}
          {%- endfor -%}
        </ul>
      </div>
    </nav>
  </div>
</div>
