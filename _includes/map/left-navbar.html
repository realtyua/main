<nav>
  <ul>
    {%- assign ones = site.html_pages | sort: 'path' | reverse -%}
    {%- for one in ones -%}
      {%- assign path = one.url | split: '/' -%}
      {%- assign part = path | size -%}
      {%- assign slug = one.url | split: '/' | last -%}
      {%- assign current = one.url | remove: slug | remove: '//' | append: '/' -%}
      {%- if '/' == current and one.navhide != 1 -%}
        {%- if one.url == '/region/' -%}
          <li class="nav-item">
            <a class="nav-link{% if page.url == one.url %} active{% endif %}" href="{{ one.url }}">
              {%- if one.navtitle -%}{{ one.navtitle }}{%- else -%}{{ one.title }}{%- endif -%}
            </a>
          </li>
        {%- else -%}
          <li class="nav-item{% if part >= 2 %} dropdown{% endif %}">
            <a class="nav-link{% if part >= 2 %} dropdown-toggle{% endif %}{% if page.url == one.url %} active{% endif %}" href="{%- if part >= 2 -%}#{%- else -%}{{ one.url }}{%- endif -%}"{% if part >= 2 %} id="navDropRealEstate{{ slug | capitalize }}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"{% endif %}>
              {%- if one.navtitle -%}{{ one.navtitle }}{%- else -%}{{ one.title }}{%- endif -%}
            </a>
            {% if part >= 2 %}
              {%- include header/dropdown.html current=one.url title=one.title -%}
            {%- endif -%}
          </li>
        {%- endif -%}
        {%- if one.url -%}
          {%- assign twos = site.html_pages -%}
          {%- for two in twos -%}
            {%- assign path = two.url | split: '/' -%}
            {%- assign part = path | size -%}
            {%- assign slug = two.url | split: '/' | last -%}
            {%- assign current = two.url | remove: slug | remove: '//' | append: '/' -%}
            {%- if one.url == current and two.url contains 'city' or two.url contains 'town' -%}
            <li class="nav-item{% if part >= 3 %} dropdown{%- endif -%}">
              <a class="nav-link{% if part >= 3 %} dropdown-toggle{%- endif -%}" href="{%- if part >= 3 -%}#{%- else -%}{{ two.url }}{%- endif -%}"{% if part >= 3 %} id="navDropRealEstate{{ slug | capitalize }}" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"{%- endif -%}>
                {%- if two.navtitle -%}{{ two.navtitle }}{%- else -%}{{ two.title }}{%- endif -%}
              </a>
              {% if part >= 3 %}
                {%- include header/dropdown.html current=two.url title=two.title -%}
              {%- endif -%}
            </li>
            {%- endif -%}
          {%- endfor -%}
        {%- endif -%}
      {%- endif -%}
    {%- endfor -%}
  </ul>
</nav>
